\documentclass[]{caesar_book}

% -- graphics --
\graphicspath{{./figures/}}

% -- language: German --
%\usepackage{csquotes}
\usepackage[english]{babel}

% -- biblatex --
\usepackage[backend = biber, style = philosophy-classic]{biblatex} % cleopatra matches the caesar book style
\addbibresource{library.bib} % the .bib file with the references
\AtEveryCitekey{\clearfield{title}} % display no article titles

% -- href compatibility --
%%
\definecolor{darkblue}{rgb}{0,0,.3}
\definecolor{darkgreen}{rgb}{0,.3,0}
\definecolor{graphblue}{rgb}{0,0,.7}
\definecolor{grey}{rgb}{.25,.25,.25}
\definecolor{orange}{rgb}{.8,.2,0}
\definecolor{green}{rgb}{0,0.5,0}
%\hypersetup{pdftex=true, linktocpage=true, colorlinks=true, breaklinks=true, linkcolor=darkblue, menucolor=darkblue, pagecolor=darkblue, urlcolor=darkblue, citecolor=darkgreen, frenchlinks=false}
%\renewcommand{\cite}[1]{\sidecite{#1}}

% -- misc --
\usepackage{lipsum}
\usepackage{nicefrac}

\usepackage{verbatim}

\newenvironment{snippet}%
{\endgraf\verbatim}%
{\endverbatim}

%%
%% -- jetzt gehts los --
%%

\title{Caesar}
\author{Andy Thomas}
\newcommand{\publisher}{Bielefeld University}


\begin{document}
% start
\frontmatter
% titlepage
\maketitlepage
% v.4 copyright page
\newpage
\begin{fullwidth}
~\vfill
\thispagestyle{empty} 
\setlength{\parindent}{0pt}
\setlength{\parskip}{\baselineskip}
\makeatletter
Copyright \copyright\ 2009 \@author
\makeatother
%\par{\publisher, Department of Physics}
%\par Schriftliche Habilitationsleistung
%\par\textit{layout edited \monthyear, content unchanged}
\end{fullwidth}
\newpage

% r.5 contents
\tableofcontents

% r.9 introduction
\cleardoublepage
%
\mainmatter
\chapter{Quick start guide}
This chapter is intended to quickly introduce the features of the caesar class. It basically comments the example file that comes with the class and explains how to use it. The class is written to be used with Lua-\LaTeX{} and Bib-\LaTeX{} and will not work otherwise. 

The numbers at the beginning correspond to the line numbers in the example file. First, the class is loaded with\\ 
\verb+1 \documentclass[]{caesar_book}+\\
The class is derived from the standard \LaTeX-book class and the square brackets allow the same parameters. The next task is to set the main language of the manuscript. \texttt{Babel} is used to set English (or any other language)\\
\verb+5 \usepackage[english]{babel}+\\
For German, \texttt{csquotes} is needed as well. Next, is the configuration of the references. \texttt{biblatex} is used in this case, it allows a lot of options to configure the exact look of the bibliography as well as the references in the text.\\
\verb+8 \usepackage[backend=biber,+\\
\verb+       style=philosophy-classic]{biblatex}+\\
\texttt{biber} is the natural companion of \texttt{biblatex}. Any style file can be used instead of \texttt{philosophy-classic}. Now, \texttt{biblatex} needs at east one resource file with the references.\\
\verb+10 \addbibresource{caesar_library.bib}+\\
In the example set, the name of the file is \texttt{library.bib}. Now, information about the book has to be added. The name of the author, the title and the publisher is automatically used to generate the title page.\\
\verb+14 \title{Caesar\\examples}+\\
\verb+15 \author{Andy Thomas}+\\
\verb+16 \newcommand{\publisher}{Bielefeld University}+\\
The document can start now.\\
\verb+18 \begin{document}+\\
The first pages of the book (the frontmatter) are not numbered, the numbering starts after the \texttt{mainmatter} macro, which is called after the generation of the title page.\\
\verb+20 \frontmatter+\\
\verb+22 \maketitlepage+\\
\verb+24 \mainmatter+\\
It is time for the first chapter. This in done in the usual way.\\
\verb+26 \chapter{Examples}+\\
A sidenote – a footnote in the margin – can be placed with the \texttt{sidenote} macro.\\
\verb+31 \sidenote{All ... necessary.}+
The citations are also placed in the margin of the document. This is done with the \texttt{sidecite} macro. The parameters mimic Biblatex's three parameters (2 optional) for citations.\\
\verb+33 \sidecite[Please see:][and more +\\
\verb+       work by Tufte.]{Tufte1990,Tufte2006}+\\
The sections are also started the common way.\\
\verb+34 \section{Figures}+\\
There are 3 different macros to place figures in the document.
\verb+37 \smallfigure{rectangle}{A ... margin.}+\\
\texttt{smallfigure} puts a figure in the margin. The first parameter is the filename which also serves as the label and the second parameter is the caption of the figure. A larger figure can be put in the text with \texttt{normalfigure} and a figure that spreads across the page width can be placed by using \texttt{largefigure}.

The same kind of macros are available for placing tables: \texttt{smalltable}, \texttt{normaltable} and \texttt{largetable}. The have 3 parameters each: reference, caption and the table code. \texttt{normaltable} and \texttt{largetable} also have the optional placing parameter, \texttt{[htbp]} is the default value.\\
\verb+53 \smalltable{table1}{A couple of numbers+\\
\verb+        in a table in the margin.}{%+\\
\verb+54  \begin{tabular}{lll}%+\\
\verb+55      A&B&C\\%+\\
\verb+56      0.50&0.47&0.48\\%+\\
\verb+57  \end{tabular}%+\\
\verb+58 }%+\\
Addtionally, there is a fullwidth environment that allows to fill text across the full page as well. However, it does not necessary work across page breaks.
\verb+79 \begin{fullwidth}+\\
\verb+80 Lorem ...+\\
\verb+81 \end{fullwidth}+\\
It might also overlap with the marginals, the sidenotes are not pushed up or down by \texttt{fullwidth}. 
The last macro allows a comment in the margin without a number. That can be achieved using
\verb+84 \margintext{It is also possible ... in the text.}+\\
Finally, the bibliography is placed using the \texttt{biblatex} syntax.
\verb+89 \printbibliography[heading=bibintoc]+\\
\end{document}
\chapter{Shaping the page}
%
The page layout utilizes one of the suggestions made by Robert Bringhurst in his typography book.\cite{xxx} One main text column and an ample margin column are used. The margin can hold sidenotes, small figures, the references and any other additional information. 
%
\normalfigure[h]{page_layout2}{}
%
This is achieved in the \LaTeX -class with the following code:
\begin{snippet}
\RequirePackage[paperwidth=170mm, 
paperheight=240mm, left=40pt, top=40pt, 
textwidth=280pt, marginparsep=20pt, 
marginparwidth=100pt, textheight=560pt, 
footskip=40pt]
{geometry}%
\end{snippet}
The corresponding ConTeXt-code is:
\begin{snippet}
% setup the page format
\definepapersize[wissenschaft][width=170mm,height=240mm]
% use the new page format
\setuppapersize[wissenschaft]
% shape the page layout
\setuplayout[topspace=40pt,
			header=0pt,
			headerdistance=0pt,
			backspace=40pt,
			leftmargin=0pt,
			width=280pt,
			height=560pt,
			rightmargindistance=20pt,
			rightmargin=100pt,
			footer=0pt]
\setuppagenumbering[alternative=doublesided]
\end{snippet}

\end{document}
